{"version":3,"sources":["Console.jsx","Variables.jsx","Graph.jsx","interpreter/evaluate.js","interpreter/tokenizer.js","interpreter/index.js","App.js","serviceWorker.js","index.js"],"names":["scrollback","Console","props","history","sendCommand","_React$useState","React","useState","_React$useState2","Object","slicedToArray","input","setInput","ref","useRef","inputRef","handleInput","e","setTimeout","current","scrollTop","scrollHeight","handleScrollback","down","arguments","length","undefined","inputs","filter","h","type","content","react_default","a","createElement","className","onClick","document","getSelection","isCollapsed","focus","map","line","key","id","concat","value","autoFocus","onChange","target","onKeyDown","preventDefault","Variables","variables","setVariables","inputName","setInputName","_React$useState3","_React$useState4","inputValue","setInputValue","onSubmit","v","JSON","parse","objectSpread","defineProperty","keys","name","stringify","objectWithoutProperties","_toPropertyKey","removeVariable","placeholder","evaluateValue","context","token","Error","isNumeric","Array","isArray","isVector","evaluateNumeric","evaluateVector","evaluateExpression","t1","op","t3","v1","v3","Math","pow","Boolean","evaluteScalarExpression","i","every","evaluateVectorExpression","evaluateVectorScalarExpression","flipOperator","GRAMMAR","string","match","m","number","operator","bracket","index_bracket","range","whitespace","ignore","interpreter","command","setContext","tokens","tail","substr","g","exec","push","tokenizer","t2","assertString","assignVariable","t4","rest","interpreter_toPropertyKey","t5","op2","op4","val","t6","slice","start","end","step","floor","fill","n","x","STATE_KEY","App","setHistory","defaultState","s","localStorage","getItem","retrieveState","state","setItem","Variables_Variables","Console_Console","newHistory","toConsumableArray","output","message","Graph_Variables","isLocalhost","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","src_App","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.ae1b0907.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport './Console.css';\r\n\r\nlet scrollback = 0;\r\n\r\nexport default function Console (props) {\r\n    const { history, sendCommand } = props;\r\n    const [ input, setInput ] = React.useState(\"\");\r\n    const ref = React.useRef();\r\n    const inputRef = React.useRef();\r\n\r\n    function handleInput (e) {\r\n        sendCommand(input);\r\n        setInput(\"\");\r\n        setTimeout(() => typeof ref.current !== \"undefined\" && (ref.current.scrollTop = ref.current.scrollHeight), 10);\r\n        scrollback = 0;\r\n    }\r\n\r\n    function handleScrollback (down=false) {\r\n        const inputs = history.filter(h => h.type === \"input\");\r\n\r\n        if (down && scrollback > 1) {\r\n            scrollback--;\r\n        }\r\n        else if (!down && scrollback < inputs.length) {\r\n            scrollback++;\r\n        }\r\n\r\n        setInput(inputs[inputs.length - scrollback].content);\r\n    }\r\n\r\n    return (\r\n        <div className=\"Console\" onClick={() => inputRef.current && document.getSelection().isCollapsed && inputRef.current.focus()}>\r\n            <div className=\"Console-historyscroller\" ref={ref}>\r\n                <ul className=\"Console-history\">\r\n                {\r\n                    history.map(line => {\r\n                        if (line.type === \"input\") {\r\n                            return <li key={line.id} className=\"line line-input\">> {line.content}</li>;\r\n                        }\r\n                        return <li key={line.id} className={`line line-${line.type}`}>{line.content}</li>;\r\n                    })\r\n                }\r\n                </ul>\r\n            </div>\r\n            <div className=\"Console-inputline\">\r\n                <span className=\"Console-prompt\">></span>\r\n                <input\r\n                    value={input}\r\n                    className=\"Console-input\"\r\n                    autoFocus\r\n                    ref={inputRef}\r\n                    onChange={e => setInput(e.target.value)}\r\n                    onKeyDown={e => {\r\n                        if (e.key === \"Enter\") { handleInput(); }\r\n                        else if (e.key === \"ArrowUp\") { handleScrollback(); e.preventDefault(); }\r\n                        else if (e.key === \"ArrowDown\") { handleScrollback(true); e.preventDefault(); }\r\n                    }}\r\n                />\r\n                <button onClick={handleInput}>Send</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\n\r\nimport './Variables.css';\r\n\r\nexport default function Variables (props) {\r\n    const { variables, setVariables } = props;\r\n    const [ inputName, setInputName ] = React.useState(\"\");\r\n    const [ inputValue, setInputValue ] = React.useState(\"\");\r\n    const ref = React.useRef();\r\n\r\n    return (\r\n        <form onSubmit={e => {\r\n            let v;\r\n            try {\r\n                v = JSON.parse(inputValue);\r\n            } catch (e) {\r\n                v = inputValue;\r\n            }\r\n            setVariables({ ...variables, [inputName]: v });\r\n            setInputName(\"\");\r\n            setInputValue(\"\");\r\n            if (typeof ref !== \"undefined\" && typeof ref.current !== \"undefined\") ref.current.focus();\r\n            e.preventDefault();\r\n        }}>\r\n            <table className=\"Variables\">\r\n                <thead>\r\n                    <tr><th>Name</th><th>Value</th></tr>\r\n                </thead>\r\n                <tbody>\r\n                {\r\n                    Object.keys(variables).map(name => {\r\n                        return (\r\n                            <tr key={name}>\r\n                                <td>{name}</td>\r\n                                <td>{JSON.stringify(variables[name])}</td>\r\n                                <td><button type=\"button\" onClick={() => setVariables(removeVariable(variables, name)) }>x</button></td>\r\n                            </tr>\r\n                        );\r\n                    })\r\n                }\r\n                <tr>\r\n                        <td><input ref={ref} value={inputName} onChange={e => setInputName(e.target.value)} placeholder=\"Name\"/></td>\r\n                        <td><input value={inputValue} onChange={e => setInputValue(e.target.value)} placeholder=\"Value\"/></td>\r\n                        <td><button type=\"submit\">+</button></td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </form>\r\n    );\r\n}\r\n\r\nfunction removeVariable (variables, name) {\r\n    const { [name]: toRemove, ...keep } = variables;\r\n    return keep;\r\n}","import React from 'react';\r\n\r\nexport default function Variables (props) {\r\n    return <div></div>;\r\n}","/** @typedef {import('./').Context} Context */\r\n/** @typedef {import('./').Vector} Vector */\r\n/** @typedef {import('./').ValueType} ValueType */\r\n/** @typedef {import('./tokenizer').Token} Token */\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|number|string} token\r\n */\r\nexport function evaluateValue (context, token) {\r\n    if (typeof token === \"number\" || typeof token === \"string\") {\r\n        return token;\r\n    }\r\n\r\n    const v = token.type === \"name\" ? context[token.value] : token.value;\r\n\r\n    if (typeof v === \"undefined\") {\r\n        throw Error(\"symbol not found: \" + token.value);\r\n    }\r\n\r\n    return v;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|ValueType} value\r\n */\r\nexport function isNumeric (context, value) {\r\n    if (typeof value === \"number\") {\r\n        return true;\r\n    }\r\n\r\n    if (Array.isArray(value) || typeof value !== \"object\") {\r\n        return false;\r\n    }\r\n\r\n    if (value.type !== \"number\" && value.type !== \"name\") {\r\n        return false;\r\n    }\r\n\r\n    const v = value.type === \"name\" ? context[value.value] : value.value;\r\n\r\n    if (typeof v === \"undefined\") {\r\n        throw Error(\"Symbol not found: \" + value.value);\r\n    } else if (typeof v !== \"number\") {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|ValueType} value\r\n */\r\nexport function isVector (context, value) {\r\n    if (Array.isArray(value)) {\r\n        return true;\r\n    }\r\n\r\n    if (typeof value !== \"object\") {\r\n        return false;\r\n    }\r\n\r\n    if (value.type !== \"name\") {\r\n        return false;\r\n    }\r\n\r\n    const v = context[value.value];\r\n\r\n    if (typeof v === \"undefined\") {\r\n        throw Error(\"Symbol not found: \" + value.value);\r\n    } else if (!Array.isArray(v)) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|number} value\r\n */\r\nexport function evaluateNumeric (context, value) {\r\n    if (typeof value === \"number\") {\r\n        return value;\r\n    }\r\n\r\n    if (Array.isArray(value)) {\r\n        throw Error(`Invalid numeric value: [Array(${value.length})]`);\r\n    }\r\n\r\n    if (typeof value !== \"object\") {\r\n        throw Error(`Invalid numeric value: [${value}]`);\r\n    }\r\n\r\n    if (value.type !== \"number\" && value.type !== \"name\") {\r\n        throw Error(`Invalid numeric value: [${value.value}]`);\r\n    }\r\n\r\n    const v = value.type === \"name\" ? context[value.value] : value.value;\r\n\r\n    if (typeof v === \"undefined\") {\r\n        throw Error(\"Symbol not found: \" + value.value);\r\n    } else if (typeof v !== \"number\") {\r\n        throw Error(`Variable '${value.value}' does not contain a numeric value`);\r\n    }\r\n\r\n    return v;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|number[]} token\r\n * @returns {number[]}\r\n */\r\nexport function evaluateVector (context, token) {\r\n    if (Array.isArray(token)) {\r\n        return token;\r\n    }\r\n\r\n    if (token.type !== \"name\") {\r\n        throw Error(`Invalid vector value: [${token.value}]`);\r\n    }\r\n\r\n    const v = context[token.value];\r\n\r\n    if (typeof v === \"undefined\") {\r\n        throw Error(\"Symbol not found: \" + token.value);\r\n    } else if (!Array.isArray(v)) {\r\n        throw Error(`Variable '${token.value}' does not contain a vector value`);\r\n    }\r\n    return v;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|ValueType} t1\r\n * @param {string} op\r\n * @param {Token|ValueType} t3\r\n */\r\nexport function evaluateExpression (context, t1, op, t3) {\r\n    if (isNumeric(context, t1) && isNumeric(context, t3)) {\r\n        return evaluteScalarExpression(context, t1, op, t3);\r\n    }\r\n\r\n    if (isVector(context, t1) && isVector(context, t3)) {\r\n        return evaluateVectorExpression(context, t1, op, t3);\r\n    }\r\n\r\n    if (isVector(context, t1) && isNumeric(context, t3)) {\r\n        return evaluateVectorScalarExpression(context, t1, op, t3);\r\n    }\r\n\r\n    if (isNumeric(context, t1) && isVector(context, t3)) {\r\n        op = flipOperator(op);\r\n        return evaluateVectorScalarExpression(context, t3, op, t1);\r\n    }\r\n\r\n    throw Error(\"Invalid expression\");\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {number|Token} t1\r\n * @param {string} op\r\n * @param {number|Token} t3\r\n */\r\nfunction evaluteScalarExpression (context, t1, op, t3) {\r\n    const v1 = evaluateNumeric(context, t1);\r\n    const v3 = evaluateNumeric(context, t3);\r\n\r\n    switch (op) {\r\n        case \"+\": {\r\n            return v1 + v3;\r\n        }\r\n        case \"-\": {\r\n            return v1 - v3;\r\n        }\r\n        case \"*\": {\r\n            return v1 * v3;\r\n        }\r\n        case \"/\": {\r\n            return v1 / v3;\r\n        }\r\n        case \"^\": {\r\n            return Math.pow(v1, v3);\r\n        }\r\n        case \"==\": {\r\n            return v1 == v3;\r\n        }\r\n        case \"!=\": {\r\n            return v1 != v3;\r\n        }\r\n        case \"<\": {\r\n            return v1 < v3;\r\n        }\r\n        case \">\": {\r\n            return v1 > v3;\r\n        }\r\n        case \"<=\": {\r\n            return v1 <= v3;\r\n        }\r\n        case \">=\": {\r\n            return v1 >= v3;\r\n        }\r\n        case \"&&\": {\r\n            return Boolean(v1 && v3);\r\n        }\r\n        case \"||\": {\r\n            return Boolean(v1 || v3);\r\n        }\r\n        case \"&\":\r\n            throw Error(\"Use && to compare numbers\");\r\n        case \"|\":\r\n            throw Error(\"Use || to compare numbers\");\r\n    }\r\n\r\n    throw Error(\"Unrecognised operator: \" + op);\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|Vector} t1\r\n * @param {string} op\r\n * @param {Token|Vector} t3\r\n */\r\nfunction evaluateVectorExpression (context, t1, op, t3) {\r\n    const v1 = evaluateVector(context, t1);\r\n    const v3 = evaluateVector(context, t3);\r\n\r\n    if (v1.length != v3.length) {\r\n        throw Error(`Vector lengths do not match: ${v1.length} and ${v3.length}`)\r\n    }\r\n\r\n    switch (op) {\r\n        case \"+\": {\r\n            return v1.map((v,i) => v + v3[i]);\r\n        }\r\n        case \"-\": {\r\n            return v1.map((v,i) => v - v3[i]);\r\n        }\r\n        case \"*\": {\r\n            return v1.map((v,i) => v * v3[i]);\r\n        }\r\n        case \"/\": {\r\n            return v1.map((v,i) => v / v3[i]);\r\n        }\r\n        case \"^\": {\r\n            return v1.map((v,i) => Math.pow(v, v3[i]));\r\n        }\r\n        case \"==\": {\r\n            return v1.map((v,i) => v == v3[i]);\r\n        }\r\n        case \"!=\": {\r\n            return v1.map((v,i) => v != v3[i]);\r\n        }\r\n        case \"<\": {\r\n            return v1.map((v,i) => v < v3[i]);\r\n        }\r\n        case \">\": {\r\n            return v1.map((v,i) => v > v3[i]);\r\n        }\r\n        case \"<=\": {\r\n            return v1.map((v,i) => v <= v3[i]);\r\n        }\r\n        case \">=\": {\r\n            return v1.map((v,i) => v >= v3[i]);\r\n        }\r\n        case \"&\": {\r\n            return v1.map((v,i) => Boolean(v && v3[i]));\r\n        }\r\n        case \"|\": {\r\n            return v1.map((v,i) => Boolean(v || v3[i]));\r\n        }\r\n        case \"&&\": {\r\n            return v1.every((v,i) => v && v3[i]);\r\n        }\r\n        case \"||\": {\r\n            return v1.every((v,i) => v || v3[i]);\r\n        }\r\n    }\r\n\r\n    throw Error(\"Unrecognised operator: \" + op);\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|Vector} t1\r\n * @param {string} op\r\n * @param {Token|number} t3\r\n */\r\nfunction evaluateVectorScalarExpression (context, t1, op, t3) {\r\n    const v1 = evaluateVector(context, t1);\r\n    const v3 = evaluateNumeric(context, t3);\r\n\r\n    switch (op) {\r\n        case \"+\": {\r\n            return v1.map(v => v + v3);\r\n        }\r\n        case \"-\": {\r\n            return v1.map(v => v - v3);\r\n        }\r\n        case \"*\": {\r\n            return v1.map(v => v * v3);\r\n        }\r\n        case \"/\": {\r\n            return v1.map(v => v / v3);\r\n        }\r\n        case \"^\": {\r\n            return v1.map(v => Math.pow(v, v3));\r\n        }\r\n        case \"==\": {\r\n            return v1.map(v => v == v3);\r\n        }\r\n        case \"!=\": {\r\n            return v1.map(v => v != v3);\r\n        }\r\n        case \"<\": {\r\n            return v1.map(v => v < v3);\r\n        }\r\n        case \">\": {\r\n            return v1.map(v => v > v3);\r\n        }\r\n        case \"<=\": {\r\n            return v1.map(v => v <= v3);\r\n        }\r\n        case \">=\": {\r\n            return v1.map(v => v >= v3);\r\n        }\r\n        case \"&\": {\r\n            return v1.map(v => Boolean(v && v3));\r\n        }\r\n        case \"|\": {\r\n            return v1.map(v => Boolean(v || v3));\r\n        }\r\n        case \"&&\": {\r\n            return v1.every(v => v && v3);\r\n        }\r\n        case \"||\": {\r\n            return v1.every(v => v || v3);\r\n        }\r\n    }\r\n\r\n    throw Error(\"Unrecognised operator: \" + op);\r\n}\r\n\r\nfunction flipOperator (op) {\r\n    if (op === \">\") return \"<\";\r\n    if (op === \"<\") return \">\";\r\n    if (op === \">=\") return \"<=\";\r\n    if (op === \"<=\") return \">=\";\r\n    return op;\r\n}","\r\nconst GRAMMAR = {\r\n    string: {\r\n        match: /^\"([^\"]*)\"/,\r\n        map: m => m[1],\r\n    },\r\n    number: {\r\n        match: /^-?[0-9]+(?:\\.[0-9]+)?/,\r\n        map: m => +m[0],\r\n    },\r\n    name: {\r\n        match: /^[a-z][a-z0-9_.]*/i,\r\n    },\r\n    operator: {\r\n        match: /^(<-|->|==|!=|<=|>=|&&|\\|\\||[-+*/<>&|^])/,\r\n    },\r\n    bracket: {\r\n        match: /^[()]/,\r\n    },\r\n    index_bracket: {\r\n        match: /^[[\\]]/,\r\n    },\r\n    range: {\r\n        match: /^:/,\r\n    },\r\n    whitespace: {\r\n        match: /^\\s+/,\r\n        ignore: true,\r\n    },\r\n};\r\n\r\n/** @typedef {\"string\"|\"number\"|\"name\"|\"operator\"|\"bracket\"|\"index_bracket\"|\"range\"|\"whitespace\"} TokenTypes */\r\n\r\n/**\r\n * @typedef Token\r\n * @prop {TokenTypes} type\r\n * @prop {string|number} value\r\n */\r\n\r\n/**\r\n *\r\n * @param {string} input\r\n * @returns {Token[]}\r\n */\r\nexport function tokenizer (input) {\r\n    let i = 0;\r\n    const tokens = [];\r\n\r\n    while (i < input.length) {\r\n        let tail = input.substr(i);\r\n        let match;\r\n\r\n        for (const key in GRAMMAR) {\r\n            const type = /** @type {TokenTypes} */ (key);\r\n            const g = GRAMMAR[type];\r\n            match = g.match.exec(tail);\r\n            if (match) {\r\n                if (!g.ignore) {\r\n                    tokens.push({\r\n                        type,\r\n                        value: g.map ? g.map(match) : match[0],\r\n                    });\r\n                }\r\n                i += match[0].length;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!match) {\r\n            throw Error(\"Unrecognised Input: \" + tail.substr(0, 10));\r\n        }\r\n    }\r\n\r\n    return tokens;\r\n}","/** @typedef {{ [name: string]: any }} Context */\r\n/** @typedef {number[]} Vector */\r\n/** @typedef {number|string|boolean|number[]|string[]|boolean[]} ValueType */\r\n\r\nimport { evaluateExpression, evaluateVector, evaluateNumeric, isNumeric, evaluateValue, isVector } from './evaluate';\r\nimport { tokenizer } from './tokenizer';\r\n\r\n/**\r\n *\r\n * @param {string} command\r\n * @param {Context} context\r\n * @param {(context: Context) => void} setContext\r\n * @returns {ValueType}\r\n */\r\nexport default function interpreter (command, context, setContext) {\r\n    if (command.length === 0) {\r\n        return;\r\n    }\r\n\r\n    const tokens = tokenizer(command);\r\n\r\n    if (tokens.length === 1) {\r\n        if (tokens[0].type === \"name\") {\r\n            if (tokens[0].value in context) {\r\n                return context[tokens[0].value];\r\n            } else {\r\n                throw Error(\"symbol not found: \" + tokens[0].value);\r\n            }\r\n        }\r\n\r\n        if (tokens[0].type === \"number\" || tokens[0].type === \"string\") {\r\n            return tokens[0].value;\r\n        }\r\n\r\n        throw Error(\"Invalid expression\");\r\n    }\r\n\r\n    if (tokens.length === 3) {\r\n        const t1 = tokens[0];\r\n        const t2 = tokens[1];\r\n        const t3 = tokens[2];\r\n\r\n        if (isNumeric(context, t1) && t2.type === \"range\" && isNumeric(context, t3)) {\r\n            return range(evaluateNumeric(context, t1), evaluateNumeric(context, t3));\r\n        }\r\n\r\n        if (t2.type !== \"operator\") {\r\n            throw Error(\"Expression not supported\");\r\n        }\r\n\r\n        const op = assertString(t2.value);\r\n\r\n        if (t2.value === \"<-\" && t1.type === \"name\") {\r\n            assignVariable(context, setContext, t1.value, evaluateValue(context, t3));\r\n            return;\r\n        } else if (t2.value === \"->\" && t3.type === \"name\") {\r\n            assignVariable(context, setContext, t3.value, evaluateValue(context, t1));\r\n            return;\r\n        }\r\n\r\n        return evaluateExpression(context, t1, op, t3);\r\n    }\r\n\r\n    if (tokens.length === 4) {\r\n        const t1 = tokens[0];\r\n        const t2 = tokens[1];\r\n        const t3 = tokens[2];\r\n        const t4 = tokens[3];\r\n\r\n        if (t1.type === \"name\" && t2.type === \"bracket\" &&\r\n            t3.type === \"name\" && t4.type === \"bracket\")\r\n        {\r\n            switch (t1.value) {\r\n                case \"rm\":\r\n                    removeVariable(context, setContext, t3.value);\r\n                    return;\r\n            }\r\n        }\r\n\r\n        if (t1.type === \"name\" && t2.type === \"index_bracket\" &&\r\n            t4.type === \"index_bracket\")\r\n        {\r\n            const v = evaluateVector(context, t1);\r\n            const i = evaluateNumeric(context, t3);\r\n\r\n            if (i < 1 || i >= v.length) {\r\n                throw Error(`Index out of range: ${i}/${v.length}`);\r\n            }\r\n\r\n            return v[i-1|0];\r\n        }\r\n    }\r\n\r\n    if (tokens.length === 5) {\r\n        const t1 = tokens[0];\r\n        const t2 = tokens[1];\r\n        const t3 = tokens[2];\r\n        const t4 = tokens[3];\r\n        const t5 = tokens[4];\r\n\r\n        if (isNumeric(context, t1) && t2.type === \"range\" &&\r\n            isNumeric(context, t3) && t4.type === \"range\" &&\r\n            isNumeric(context, t5))\r\n        {\r\n            return range(evaluateNumeric(context, t1), evaluateNumeric(context, t3), evaluateNumeric(context, t5));\r\n        }\r\n\r\n        if (t2.type !== \"operator\" || t4.type !== \"operator\")\r\n        {\r\n            throw Error(\"Expression not supported\");\r\n        }\r\n\r\n        const op2 = assertString(t2.value);\r\n        const op4 = assertString(t4.value);\r\n\r\n        if (op2 === \"<-\" && (op4 !== \"<-\" && op4 !== \"->\") && t1.type === \"name\") {\r\n            const val = evaluateExpression(context, t3, op4, t5);\r\n            assignVariable(context, setContext, t1.value, val);\r\n            return;\r\n        } else if (op4 === \"->\" && (op2 !== \"<-\" && op2 !== \"->\") && t5.type === \"name\") {\r\n            const val = evaluateExpression(context, t1, op2, t3);\r\n            assignVariable(context, setContext, t5.value, val);\r\n            return;\r\n        } else {\r\n            const val = evaluateExpression(context, t1, op2, t3);\r\n            if (typeof val === \"boolean\") throw Error(\"Bad expression\");\r\n            return evaluateExpression(context, val, op4, t5);\r\n        }\r\n    }\r\n\r\n    if (tokens.length === 6) {\r\n        const t1 = tokens[0];\r\n        const t2 = tokens[1];\r\n        const t3 = tokens[2];\r\n        const t4 = tokens[3];\r\n        const t5 = tokens[4];\r\n        const t6 = tokens[5];\r\n\r\n        if (t1.type === \"name\" && isVector(context, t1) &&\r\n            t2.type === \"index_bracket\" &&\r\n            isNumeric(context, t3) &&\r\n            t4.type === \"range\" &&\r\n            isNumeric(context, t5) &&\r\n            t6.type === \"index_bracket\")\r\n        {\r\n            const v = evaluateVector(context, t1);\r\n            return v.slice(evaluateNumeric(context, t3) - 1, evaluateNumeric(context, t5));\r\n        }\r\n    }\r\n\r\n    throw Error(`Command not recognised: '${command}'`);\r\n}\r\n\r\nfunction assignVariable (context, setContext, name, value) {\r\n    setContext({\r\n        ...context,\r\n        [name]: value,\r\n    });\r\n}\r\n\r\nfunction removeVariable (context, setContext, name) {\r\n    const { [name]: toRemove, ...rest } = context;\r\n    setContext(rest);\r\n}\r\n\r\nfunction range (start, end, step=1) {\r\n    return Array(Math.floor((end - start)/step) + 1).fill(0).map((n,i) => (i * step) + start);\r\n}\r\n\r\nfunction assertString (x) {\r\n    if (process.env.NODE_ENV === \"production\") return x;\r\n    if (typeof x !== \"string\") {\r\n        throw Error(\"Assertion Error\");\r\n    }\r\n    return x;\r\n}\r\n","import React from 'react';\r\nimport './App.css';\r\n\r\nimport Console from './Console';\r\nimport Variables from './Variables';\r\nimport Graph from './Graph';\r\n\r\nimport interpreter from './interpreter';\r\n\r\nconst STATE_KEY = \"R_VARIABLES\";\r\n\r\nfunction App() {\r\n  const [ history , setHistory ] = React.useState([]);\r\n  const [ context , setContext ] = React.useState(retrieveState(STATE_KEY));\r\n\r\n  function setVariables (variables) {\r\n    setContext(variables);\r\n    persistState(STATE_KEY, variables);\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"App-Variables\">\r\n        <Variables variables={context} setVariables={setVariables} />\r\n      </div>\r\n      <div className=\"App-Console\">\r\n        <Console history={history} sendCommand={input => {\r\n          const newHistory = [\r\n            ...history,\r\n            { id: history.length + 1, type: \"input\", content: input }\r\n          ];\r\n          try {\r\n            const output = JSON.stringify(interpreter(input, context, setVariables));\r\n            if (typeof output !== \"undefined\") {\r\n              newHistory.push({ id: history.length + 2, type: \"output\", content: output });\r\n            }\r\n          } catch (e) {\r\n            newHistory.push({ id: history.length + 2, type: \"error\", content: e.message });\r\n          }\r\n          setHistory(newHistory);\r\n        }} />\r\n      </div>\r\n      <div className=\"App-Graph\">\r\n        <Graph />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction persistState (key, state) {\r\n  localStorage.setItem(key, JSON.stringify(state));\r\n}\r\n\r\nfunction retrieveState (key, defaultState={}) {\r\n  try {\r\n    const s = localStorage.getItem(key);\r\n    return s ? JSON.parse(s) : defaultState;\r\n  } catch (e) {\r\n    return defaultState;\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}