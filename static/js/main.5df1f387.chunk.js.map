{"version":3,"sources":["Console.jsx","Variables.jsx","Graph.jsx","interpreter/evaluate.js","interpreter/tokenizer.js","interpreter/matrix.ts","interpreter/index.js","App.js","serviceWorker.js","index.js"],"names":["scrollback","Console","props","history","sendCommand","performReplacement","_React$useState","React","useState","_React$useState2","Object","slicedToArray","input","setInput","ref","useRef","inputRef","handleSend","setTimeout","current","scrollTop","scrollHeight","handleScrollback","down","arguments","length","undefined","inputs","filter","h","type","content","react_default","a","createElement","className","onClick","document","getSelection","isCollapsed","focus","map","line","key","id","concat","value","autoFocus","onChange","e","target","replace","onKeyDown","preventDefault","Variables","variables","setVariables","inputName","setInputName","_React$useState3","_React$useState4","inputValue","setInputValue","onSubmit","v","JSON","parse","objectSpread","defineProperty","keys","name","stringify","objectWithoutProperties","_toPropertyKey","removeVariable","placeholder","evaluateValue","context","token","Error","isNumeric","Array","isArray","isVector","evaluateNumeric","evaluateVector","evaluateExpression","t1","op","t3","v1","v3","Math","pow","Boolean","evaluteScalarExpression","i","every","evaluateVectorExpression","evaluateVectorScalarExpression","n1","flipOperator","evaluateScalarVectorExpression","GRAMMAR","string","match","m","number","operator","bracket","index_bracket","range","whitespace","ignore","Matrix","_Float64Array","cols","rows","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","fill","inherits","createClass","j","other","RangeError","str","wrapNativeSuper","Float64Array","interpreter","command","setContext","tokens","tail","substr","g","exec","push","tokenizer","t2","assertString","isAssignmentOp","assignVariable","t4","rest","interpreter_toPropertyKey","size","setValue","identity","t5","val","op2","op4","t6","slice","start","end","step","floor","n","x","t","dir","tDir","STATE_KEY","App","setHistory","defaultState","s","localStorage","getItem","retrieveState","state","setItem","Variables_Variables","Console_Console","newHistory","toConsumableArray","output","toString","split","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","message","Graph_Variables","isLocalhost","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","src_App","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.5df1f387.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport './Console.css';\r\n\r\nlet scrollback = 0;\r\n\r\nexport default function Console (props) {\r\n    const { history, sendCommand, performReplacement } = props;\r\n    const [ input, setInput ] = React.useState(\"\");\r\n    const ref = React.useRef();\r\n    const inputRef = React.useRef();\r\n\r\n    function handleInput (e) {\r\n        let { value } = e.target;\r\n\r\n        if (performReplacement) {\r\n            value = value\r\n                .replace(\"*\",\"×\")\r\n                .replace(\"/\",\"÷\")\r\n                .replace(\"!=\", \"≠\")\r\n                .replace(\"!=\", \"≠\")\r\n                .replace(\"<=\", \"⩽\")\r\n                .replace(\">=\", \"⩾\")\r\n                .replace(\"->\", \"→\")\r\n                .replace(\"<-\", \"←\");\r\n        }\r\n\r\n        setInput(value);\r\n    }\r\n\r\n    function handleSend () {\r\n        sendCommand(input);\r\n        setInput(\"\");\r\n        setTimeout(() => typeof ref.current !== \"undefined\" && (ref.current.scrollTop = ref.current.scrollHeight), 10);\r\n        scrollback = 0;\r\n    }\r\n\r\n    function handleScrollback (down=false) {\r\n        const inputs = history.filter(h => h.type === \"input\");\r\n\r\n        if (inputs.length === 0) return;\r\n\r\n        if (down && scrollback > 1) {\r\n            scrollback--;\r\n        }\r\n        else if (!down && scrollback < inputs.length) {\r\n            scrollback++;\r\n        }\r\n\r\n        setInput(inputs[inputs.length - scrollback].content);\r\n    }\r\n\r\n    return (\r\n        <div className=\"Console\" onClick={() => inputRef.current && document.getSelection().isCollapsed && inputRef.current.focus()}>\r\n            <div className=\"Console-historyscroller\" ref={ref}>\r\n                <ul className=\"Console-history\">\r\n                {\r\n                    history.map(line => {\r\n                        if (line.type === \"input\") {\r\n                            return <li key={line.id} className=\"line line-input\">{line.content}</li>;\r\n                        }\r\n                        return <li key={line.id} className={`line line-${line.type}`}>{line.content}</li>;\r\n                    })\r\n                }\r\n                </ul>\r\n            </div>\r\n            <div className=\"Console-inputline\">\r\n                <span className=\"Console-prompt\">></span>\r\n                <input\r\n                    value={input}\r\n                    className=\"Console-input\"\r\n                    autoFocus\r\n                    ref={inputRef}\r\n                    onChange={handleInput}\r\n                    onKeyDown={e => {\r\n                        if (e.key === \"Enter\") { handleSend(); }\r\n                        else if (e.key === \"ArrowUp\") { handleScrollback(); e.preventDefault(); }\r\n                        else if (e.key === \"ArrowDown\") { handleScrollback(true); e.preventDefault(); }\r\n                    }}\r\n                />\r\n                <button onClick={handleSend}>Send</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\n\r\nimport './Variables.css';\r\n\r\nexport default function Variables (props) {\r\n    const { variables, setVariables } = props;\r\n    const [ inputName, setInputName ] = React.useState(\"\");\r\n    const [ inputValue, setInputValue ] = React.useState(\"\");\r\n    const ref = React.useRef();\r\n\r\n    return (\r\n        <form onSubmit={e => {\r\n            let v;\r\n            try {\r\n                v = JSON.parse(inputValue);\r\n            } catch (e) {\r\n                v = inputValue;\r\n            }\r\n            setVariables({ ...variables, [inputName]: v });\r\n            setInputName(\"\");\r\n            setInputValue(\"\");\r\n            if (typeof ref !== \"undefined\" && typeof ref.current !== \"undefined\") ref.current.focus();\r\n            e.preventDefault();\r\n        }}>\r\n            <table className=\"Variables\">\r\n                <thead>\r\n                    <tr><th>Name</th><th>Value</th></tr>\r\n                </thead>\r\n                <tbody>\r\n                {\r\n                    Object.keys(variables).map(name => {\r\n                        return (\r\n                            <tr key={name}>\r\n                                <td>{name}</td>\r\n                                <td>{JSON.stringify(variables[name])}</td>\r\n                                <td><button type=\"button\" onClick={() => setVariables(removeVariable(variables, name)) }>x</button></td>\r\n                            </tr>\r\n                        );\r\n                    })\r\n                }\r\n                <tr>\r\n                        <td><input ref={ref} value={inputName} onChange={e => setInputName(e.target.value)} placeholder=\"Name\"/></td>\r\n                        <td><input value={inputValue} onChange={e => setInputValue(e.target.value)} placeholder=\"Value\"/></td>\r\n                        <td><button type=\"submit\">+</button></td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </form>\r\n    );\r\n}\r\n\r\nfunction removeVariable (variables, name) {\r\n    const { [name]: toRemove, ...keep } = variables;\r\n    return keep;\r\n}","import React from 'react';\r\n\r\nexport default function Variables (props) {\r\n    return <div></div>;\r\n}","/** @typedef {import('./').Context} Context */\r\n/** @typedef {import('./').Vector} Vector */\r\n/** @typedef {import('./').ValueType} ValueType */\r\n/** @typedef {import('./tokenizer').Token} Token */\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|number|string} token\r\n */\r\nexport function evaluateValue (context, token) {\r\n    if (typeof token === \"number\" || typeof token === \"string\") {\r\n        return token;\r\n    }\r\n\r\n    const v = token.type === \"name\" ? context[token.value] : token.value;\r\n\r\n    if (typeof v === \"undefined\") {\r\n        throw Error(\"symbol not found: \" + token.value);\r\n    }\r\n\r\n    return v;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|ValueType} value\r\n */\r\nexport function isNumeric (context, value) {\r\n    if (typeof value === \"number\") {\r\n        return true;\r\n    }\r\n\r\n    if (Array.isArray(value) || typeof value !== \"object\") {\r\n        return false;\r\n    }\r\n\r\n    if (value.type !== \"number\" && value.type !== \"name\") {\r\n        return false;\r\n    }\r\n\r\n    const v = value.type === \"name\" ? context[value.value] : value.value;\r\n\r\n    if (typeof v === \"undefined\") {\r\n        return false;\r\n    } else if (typeof v !== \"number\") {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|ValueType} value\r\n */\r\nexport function isVector (context, value) {\r\n    if (Array.isArray(value)) {\r\n        return true;\r\n    }\r\n\r\n    if (typeof value !== \"object\") {\r\n        return false;\r\n    }\r\n\r\n    if (value.type !== \"name\") {\r\n        return false;\r\n    }\r\n\r\n    const v = context[value.value];\r\n\r\n    if (typeof v === \"undefined\") {\r\n        return false;\r\n    } else if (!Array.isArray(v)) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|number} value\r\n */\r\nexport function evaluateNumeric (context, value) {\r\n    if (typeof value === \"number\") {\r\n        return value;\r\n    }\r\n\r\n    if (Array.isArray(value)) {\r\n        throw Error(`Invalid numeric value: [Array(${value.length})]`);\r\n    }\r\n\r\n    if (typeof value !== \"object\") {\r\n        throw Error(`Invalid numeric value: [${value}]`);\r\n    }\r\n\r\n    if (value.type !== \"number\" && value.type !== \"name\") {\r\n        throw Error(`Invalid numeric value: [${value.value}]`);\r\n    }\r\n\r\n    const v = value.type === \"name\" ? context[value.value] : value.value;\r\n\r\n    if (typeof v === \"undefined\") {\r\n        throw Error(\"Symbol not found: \" + value.value);\r\n    } else if (typeof v !== \"number\") {\r\n        throw Error(`Variable '${value.value}' does not contain a numeric value`);\r\n    }\r\n\r\n    return v;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|number[]} token\r\n * @returns {number[]}\r\n */\r\nexport function evaluateVector (context, token) {\r\n    if (Array.isArray(token)) {\r\n        return token;\r\n    }\r\n\r\n    if (token.type !== \"name\") {\r\n        throw Error(`Invalid vector value: [${token.value}]`);\r\n    }\r\n\r\n    const v = context[token.value];\r\n\r\n    if (typeof v === \"undefined\") {\r\n        throw Error(\"Symbol not found: \" + token.value);\r\n    } else if (!Array.isArray(v)) {\r\n        throw Error(`Variable '${token.value}' does not contain a vector value`);\r\n    }\r\n    return v;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|ValueType} t1\r\n * @param {string} op\r\n * @param {Token|ValueType} t3\r\n */\r\nexport function evaluateExpression (context, t1, op, t3) {\r\n    if (isNumeric(context, t1) && isNumeric(context, t3)) {\r\n        return evaluteScalarExpression(context, t1, op, t3);\r\n    }\r\n\r\n    if (isVector(context, t1) && isVector(context, t3)) {\r\n        return evaluateVectorExpression(context, t1, op, t3);\r\n    }\r\n\r\n    if (isVector(context, t1) && isNumeric(context, t3)) {\r\n        return evaluateVectorScalarExpression(context, t1, op, t3);\r\n    }\r\n\r\n    if (isNumeric(context, t1) && isVector(context, t3)) {\r\n        return evaluateScalarVectorExpression(context, t1, op, t3);\r\n    }\r\n\r\n    throw Error(\"Invalid expression\");\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {number|Token} t1\r\n * @param {string} op\r\n * @param {number|Token} t3\r\n */\r\nfunction evaluteScalarExpression (context, t1, op, t3) {\r\n    const v1 = evaluateNumeric(context, t1);\r\n    const v3 = evaluateNumeric(context, t3);\r\n\r\n    switch (op) {\r\n        case \"+\": {\r\n            return v1 + v3;\r\n        }\r\n        case \"-\": {\r\n            return v1 - v3;\r\n        }\r\n        case \"*\":\r\n        case \"×\":\r\n        {\r\n            return v1 * v3;\r\n        }\r\n        case \"/\":\r\n        case \"÷\":\r\n        {\r\n            return v1 / v3;\r\n        }\r\n        case \"^\": {\r\n            return Math.pow(v1, v3);\r\n        }\r\n        case \"==\": {\r\n            return v1 == v3;\r\n        }\r\n        case \"!=\":\r\n        case \"≠\":\r\n        {\r\n            return v1 != v3;\r\n        }\r\n        case \"<\": {\r\n            return v1 < v3;\r\n        }\r\n        case \">\": {\r\n            return v1 > v3;\r\n        }\r\n        case \"<=\":\r\n        case \"≤\":\r\n        case \"⩽\":\r\n        {\r\n            return v1 <= v3;\r\n        }\r\n        case \">=\":\r\n        case \"≥\":\r\n        case \"⩾\":\r\n        {\r\n            return v1 >= v3;\r\n        }\r\n        case \"&&\": {\r\n            return Boolean(v1 && v3);\r\n        }\r\n        case \"||\": {\r\n            return Boolean(v1 || v3);\r\n        }\r\n        case \"&\":\r\n            throw Error(\"Use && to compare numbers\");\r\n        case \"|\":\r\n            throw Error(\"Use || to compare numbers\");\r\n    }\r\n\r\n    throw Error(\"Unrecognised operator: \" + op);\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|Vector} t1\r\n * @param {string} op\r\n * @param {Token|Vector} t3\r\n */\r\nfunction evaluateVectorExpression (context, t1, op, t3) {\r\n    const v1 = evaluateVector(context, t1);\r\n    const v3 = evaluateVector(context, t3);\r\n\r\n    if (v1.length != v3.length) {\r\n        throw Error(`Vector lengths do not match: ${v1.length} and ${v3.length}`)\r\n    }\r\n\r\n    switch (op) {\r\n        case \"+\": {\r\n            return v1.map((v,i) => v + v3[i]);\r\n        }\r\n        case \"-\": {\r\n            return v1.map((v,i) => v - v3[i]);\r\n        }\r\n        case \"*\":\r\n        case \"×\":\r\n        {\r\n            return v1.map((v,i) => v * v3[i]);\r\n        }\r\n        case \"/\":\r\n        case \"÷\":\r\n        {\r\n            return v1.map((v,i) => v / v3[i]);\r\n        }\r\n        case \"^\": {\r\n            return v1.map((v,i) => Math.pow(v, v3[i]));\r\n        }\r\n        case \"==\": {\r\n            return v1.map((v,i) => v == v3[i]);\r\n        }\r\n        case \"!=\":\r\n        case \"≠\":\r\n        {\r\n            return v1.map((v,i) => v != v3[i]);\r\n        }\r\n        case \"<\": {\r\n            return v1.map((v,i) => v < v3[i]);\r\n        }\r\n        case \">\": {\r\n            return v1.map((v,i) => v > v3[i]);\r\n        }\r\n        case \"<=\":\r\n        case \"≤\":\r\n        case \"⩽\":\r\n        {\r\n            return v1.map((v,i) => v <= v3[i]);\r\n        }\r\n        case \">=\":\r\n        case \"≥\":\r\n        case \"⩾\":\r\n        {\r\n            return v1.map((v,i) => v >= v3[i]);\r\n        }\r\n        case \"&\": {\r\n            return v1.map((v,i) => Boolean(v && v3[i]));\r\n        }\r\n        case \"|\": {\r\n            return v1.map((v,i) => Boolean(v || v3[i]));\r\n        }\r\n        case \"&&\": {\r\n            return v1.every((v,i) => v && v3[i]);\r\n        }\r\n        case \"||\": {\r\n            return v1.every((v,i) => v || v3[i]);\r\n        }\r\n    }\r\n\r\n    throw Error(\"Unrecognised operator: \" + op);\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|number} t1\r\n * @param {string} op\r\n * @param {Token|Vector} t3\r\n */\r\nfunction evaluateScalarVectorExpression (context, t1, op, t3) {\r\n    const n1 = evaluateNumeric(context, t1);\r\n    const v3 = evaluateVector(context, t3);\r\n\r\n    // Some operations are not commutative\r\n    switch (op) {\r\n        case \"-\": {\r\n            return v3.map(v => n1 - v);\r\n        }\r\n        case \"/\": {\r\n            return v3.map(v => n1 / v);\r\n        }\r\n        case \"^\": {\r\n            return v3.map(v => Math.pow(n1, v));\r\n        }\r\n        default: {\r\n            return evaluateVectorScalarExpression(context, v3, flipOperator(op), n1);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {Token|Vector} t1\r\n * @param {string} op\r\n * @param {Token|number} t3\r\n */\r\nfunction evaluateVectorScalarExpression (context, t1, op, t3) {\r\n    const v1 = evaluateVector(context, t1);\r\n    const v3 = evaluateNumeric(context, t3);\r\n\r\n    switch (op) {\r\n        case \"+\": {\r\n            return v1.map(v => v + v3);\r\n        }\r\n        case \"-\": {\r\n            return v1.map(v => v - v3);\r\n        }\r\n        case \"*\":\r\n        case \"×\":\r\n        {\r\n            return v1.map(v => v * v3);\r\n        }\r\n        case \"/\":\r\n        case \"÷\":\r\n        {\r\n            return v1.map(v => v / v3);\r\n        }\r\n        case \"^\": {\r\n            return v1.map(v => Math.pow(v, v3));\r\n        }\r\n        case \"==\": {\r\n            return v1.map(v => v == v3);\r\n        }\r\n        case \"!=\":\r\n        case \"≠\":\r\n        {\r\n            return v1.map(v => v != v3);\r\n        }\r\n        case \"<\": {\r\n            return v1.map(v => v < v3);\r\n        }\r\n        case \">\": {\r\n            return v1.map(v => v > v3);\r\n        }\r\n        case \"<=\":\r\n        case \"≤\":\r\n        case \"⩽\":\r\n        {\r\n            return v1.map(v => v <= v3);\r\n        }\r\n        case \">=\":\r\n        case \"≥\":\r\n        case \"⩾\":\r\n        {\r\n            return v1.map(v => v >= v3);\r\n        }\r\n        case \"&\": {\r\n            return v1.map(v => Boolean(v && v3));\r\n        }\r\n        case \"|\": {\r\n            return v1.map(v => Boolean(v || v3));\r\n        }\r\n        case \"&&\": {\r\n            return v1.every(v => v && v3);\r\n        }\r\n        case \"||\": {\r\n            return v1.every(v => v || v3);\r\n        }\r\n    }\r\n\r\n    throw Error(\"Unrecognised operator: \" + op);\r\n}\r\n\r\nfunction flipOperator (op) {\r\n    if (op === \">\") return \"<\";\r\n    if (op === \"<\") return \">\";\r\n    if (op === \">=\") return \"<=\";\r\n    if (op === \"<=\") return \">=\";\r\n    if (op === \"-\" || op === \"/\" || op === \"^\") throw Error(`Operator ${op} is not commutative`);\r\n    return op;\r\n}","\r\nconst GRAMMAR = {\r\n    string: {\r\n        match: /^\"([^\"]*)\"/,\r\n        map: m => m[1],\r\n    },\r\n    number: {\r\n        match: /^-?[0-9]+(?:\\.[0-9]+)?/,\r\n        map: m => +m[0],\r\n    },\r\n    name: {\r\n        match: /^[a-z][a-z0-9_.]*/i,\r\n    },\r\n    operator: {\r\n        match: /^(<-|->|==|!=|<=|>=|&&|\\|\\||[-+*/<>&|^×÷←→≠≤≥⩽⩾])/,\r\n    },\r\n    bracket: {\r\n        match: /^[()]/,\r\n    },\r\n    index_bracket: {\r\n        match: /^[[\\]]/,\r\n    },\r\n    range: {\r\n        match: /^:/,\r\n    },\r\n    whitespace: {\r\n        match: /^\\s+/,\r\n        ignore: true,\r\n    },\r\n};\r\n\r\n/** @typedef {\"string\"|\"number\"|\"name\"|\"operator\"|\"bracket\"|\"index_bracket\"|\"range\"|\"whitespace\"} TokenTypes */\r\n\r\n/**\r\n * @typedef Token\r\n * @prop {TokenTypes} type\r\n * @prop {string|number} value\r\n */\r\n\r\n/**\r\n *\r\n * @param {string} input\r\n * @returns {Token[]}\r\n */\r\nexport function tokenizer (input) {\r\n    let i = 0;\r\n    const tokens = [];\r\n\r\n    while (i < input.length) {\r\n        let tail = input.substr(i);\r\n        let match;\r\n\r\n        for (const key in GRAMMAR) {\r\n            const type = /** @type {TokenTypes} */ (key);\r\n            const g = GRAMMAR[type];\r\n            match = g.match.exec(tail);\r\n            if (match) {\r\n                if (!g.ignore) {\r\n                    tokens.push({\r\n                        type,\r\n                        value: g.map ? g.map(match) : match[0],\r\n                    });\r\n                }\r\n                i += match[0].length;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!match) {\r\n            throw Error(\"Unrecognised Input: \" + tail.substr(0, 10));\r\n        }\r\n    }\r\n\r\n    return tokens;\r\n}","export class Matrix extends Float64Array {\r\n    cols: number;\r\n    rows: number;\r\n\r\n    constructor (cols: number, rows: number) {\r\n        super(cols * rows);\r\n\r\n        this.cols = cols;\r\n        this.rows = rows;\r\n\r\n        this.fill(0);\r\n    }\r\n\r\n    getValue (i: number , j: number) {\r\n        return this[i * this.rows + j];\r\n    }\r\n\r\n    setValue (i: number, j: number, value: number) {\r\n        this[i * this.rows + j] = value;\r\n    }\r\n\r\n    add (other: Matrix) {\r\n        if (other.length !== this.length) {\r\n            throw RangeError(`Lengths must be the same ${this.length} vs. ${other.length}`);\r\n        }\r\n\r\n        for (let i = 0; i < this.length; i++) {\r\n            this[i] += other[i];\r\n        }\r\n    }\r\n\r\n    toString () {\r\n        let str = '';\r\n\r\n        for (let j = 0; j < this.rows; j++) {\r\n            for (let i = 0; i < this.cols; i++) {\r\n                const index = i * this.rows + j;\r\n\r\n                str += this[index] + ' ';\r\n            }\r\n            str += '\\n';\r\n        }\r\n\r\n        return str;\r\n    }\r\n}\r\n\r\nexport class Vector extends Matrix {\r\n    constructor (size: number|number[]) {\r\n        if (typeof size === \"number\") {\r\n            super(1, size);\r\n        } else {\r\n            super(1, size.length);\r\n            this.set(size);\r\n        }\r\n    }\r\n\r\n    getValue (j: number) {\r\n        return this[j];\r\n    }\r\n\r\n    setValue (j: number, value: number) {\r\n        this[j] = value;\r\n    }\r\n\r\n    toString () {\r\n        return this.join('\\n');\r\n    }\r\n}\r\n\r\nexport function identity (size: number) {\r\n    const m = new Matrix(size, size);\r\n\r\n    for (let i = 0; i < size; i++) {\r\n        m.setValue(i, i, 1);\r\n    }\r\n\r\n    return m;\r\n}\r\n\r\nexport function cross (a: Matrix, b: Matrix) {\r\n    if (a.cols !== b.rows) {\r\n        throw RangeError(`Matrix size mismatch. Cols(${a.cols}) must match Rows(${b.rows})`);\r\n    }\r\n\r\n    const { cols } = b;\r\n    const { rows } = a;\r\n    const { cols: depth } = a;\r\n\r\n    const out = new Matrix(cols, rows);\r\n\r\n    for (let i = 0; i < cols; i++) {\r\n        for (let j = 0; j < rows; j++) {\r\n            const index = i * rows + j;\r\n\r\n            for (let ii = 0; ii < depth; ii++) {\r\n                out[index] += a[ii * rows + j] * b[i * depth + ii];\r\n            }\r\n        }\r\n    }\r\n\r\n    return out;\r\n}","/** @typedef {{ [name: string]: any }} Context */\r\n/** @typedef {number[]} Vector */\r\n/** @typedef {number|string|boolean|number[]|string[]|boolean[]|Matrix} ValueType */\r\n/** @typedef {import('./tokenizer').Token} Token */\r\n\r\nimport { evaluateExpression, evaluateVector, evaluateNumeric, isNumeric, evaluateValue, isVector } from './evaluate';\r\nimport { tokenizer } from './tokenizer';\r\nimport { Matrix, identity } from './matrix';\r\n\r\n/**\r\n *\r\n * @param {string} command\r\n * @param {Context} context\r\n * @param {(context: Context) => void} setContext\r\n * @returns {ValueType}\r\n */\r\nexport default function interpreter (command, context, setContext) {\r\n    if (command.length === 0) {\r\n        return;\r\n    }\r\n\r\n    const tokens = tokenizer(command);\r\n\r\n    if (tokens.length === 1) {\r\n        /*\r\n         * evaluate symbol\r\n         * e.g.  n\r\n         */\r\n        if (tokens[0].type === \"name\") {\r\n            if (tokens[0].value in context) {\r\n                return context[tokens[0].value];\r\n            } else {\r\n                throw Error(\"symbol not found: \" + tokens[0].value);\r\n            }\r\n        }\r\n\r\n        /*\r\n         * evaluate value\r\n         * e.g.  1\r\n         */\r\n        if (tokens[0].type === \"number\" || tokens[0].type === \"string\") {\r\n            return tokens[0].value;\r\n        }\r\n\r\n        throw Error(\"Invalid expression\");\r\n    }\r\n\r\n    if (tokens.length === 3) {\r\n        const t1 = tokens[0];\r\n        const t2 = tokens[1];\r\n        const t3 = tokens[2];\r\n\r\n\r\n        /*\r\n         * evaluate range\r\n         * e.g.  1:5\r\n         */\r\n        if (isNumeric(context, t1) && t2.type === \"range\" && isNumeric(context, t3)) {\r\n            return range(evaluateNumeric(context, t1), evaluateNumeric(context, t3));\r\n        }\r\n\r\n        if (t2.type !== \"operator\") {\r\n            throw Error(\"Expression not supported\");\r\n        }\r\n\r\n        const op = assertString(t2.value);\r\n\r\n        /*\r\n         * evaluate assignment\r\n         * e.g.  a <- 1\r\n         * e.g.  b <- a\r\n         */\r\n        if (isAssignmentOp(t2, \"left\") && t1.type === \"name\") {\r\n            assignVariable(context, setContext, t1.value, evaluateValue(context, t3));\r\n            return;\r\n        }\r\n\r\n        /*\r\n         * evaluate assignment\r\n         * e.g.  2 -> b\r\n         * e.g.  a -> b\r\n         */\r\n        if (isAssignmentOp(t2, \"right\") && t3.type === \"name\") {\r\n            assignVariable(context, setContext, t3.value, evaluateValue(context, t1));\r\n            return;\r\n        }\r\n\r\n        /*\r\n         * evaluate operation\r\n         * e.g.  1 + 3\r\n         * e.g.  1 - b\r\n         * e.g.  a / b\r\n         * e.g.  2 * 9\r\n         * e.g.  2 ^ 9\r\n         */\r\n        return evaluateExpression(context, t1, op, t3);\r\n    }\r\n\r\n    if (tokens.length === 4) {\r\n        const t1 = tokens[0];\r\n        const t2 = tokens[1];\r\n        const t3 = tokens[2];\r\n        const t4 = tokens[3];\r\n\r\n        /*\r\n         * call function\r\n         * e.g.  rm(a)\r\n         */\r\n        if (t1.type === \"name\" && t2.type === \"bracket\" &&\r\n            t4.type === \"bracket\")\r\n        {\r\n            switch (t1.value) {\r\n                case \"rm\":\r\n                {\r\n                    if (t3.type !== \"name\") throw Error(\"Argument to `rm` must be a name\");\r\n                    removeVariable(context, setContext, t3.value);\r\n                    return;\r\n                }\r\n                case \"identity\":\r\n                {\r\n                    const d = evaluateNumeric(context, t3);\r\n                    return identity(d);\r\n                }\r\n            }\r\n        }\r\n\r\n        /*\r\n         * index into vector\r\n         * e.g.  aa[1]\r\n         * e.g.  aa[b]\r\n         */\r\n        if (t1.type === \"name\" && t2.type === \"index_bracket\" &&\r\n            t4.type === \"index_bracket\")\r\n        {\r\n            const v = evaluateVector(context, t1);\r\n            const i = evaluateNumeric(context, t3);\r\n\r\n            if (i < 1 || i >= v.length) {\r\n                throw Error(`Index out of range: ${i}/${v.length}`);\r\n            }\r\n\r\n            return v[i-1|0];\r\n        }\r\n    }\r\n\r\n    if (tokens.length === 5) {\r\n        const t1 = tokens[0];\r\n        const t2 = tokens[1];\r\n        const t3 = tokens[2];\r\n        const t4 = tokens[3];\r\n        const t5 = tokens[4];\r\n\r\n        /*\r\n         * evaluate range with step\r\n         * e.g.  1:10:2\r\n         */\r\n        if (isNumeric(context, t1) && t2.type === \"range\" &&\r\n            isNumeric(context, t3) && t4.type === \"range\" &&\r\n            isNumeric(context, t5))\r\n        {\r\n            return range(evaluateNumeric(context, t1), evaluateNumeric(context, t3), evaluateNumeric(context, t5));\r\n        }\r\n\r\n        /*\r\n         * assignment of range\r\n         * e.g.  aa <- 1:5\r\n         */\r\n        if (t1.type === \"name\" &&\r\n            t2.type === \"operator\" && isAssignmentOp(t2, \"left\") &&\r\n            isNumeric(context, t3) &&\r\n            t4.type === \"range\" &&\r\n            isNumeric(context, t5)\r\n        ) {\r\n            const val = range(evaluateNumeric(context, t3), evaluateNumeric(context, t5));\r\n            assignVariable(context, setContext, t1.value, val);\r\n            return;\r\n        }\r\n\r\n        /*\r\n         * assignment of range\r\n         * e.g. 1:5 -> aa\r\n         */\r\n        if (\r\n            isNumeric(context, t1) &&\r\n            t2.type === \"range\" &&\r\n            isNumeric(context, t3) &&\r\n            t4.type === \"operator\" && isAssignmentOp(t4, \"right\") &&\r\n            t5.type === \"name\"\r\n        ) {\r\n            const val = range(evaluateNumeric(context, t1), evaluateNumeric(context, t3));\r\n            assignVariable(context, setContext, t5.value, val);\r\n            return;\r\n        }\r\n\r\n        if (t2.type !== \"operator\" || t4.type !== \"operator\")\r\n        {\r\n            throw Error(\"Expression not supported\");\r\n        }\r\n\r\n        const op2 = assertString(t2.value);\r\n        const op4 = assertString(t4.value);\r\n\r\n        /*\r\n         * assignment of operation\r\n         * e.g.  a <- 1 + 5\r\n         */\r\n        if (isAssignmentOp(t2, \"left\") && !isAssignmentOp(t4) && t1.type === \"name\") {\r\n            const val = evaluateExpression(context, t3, op4, t5);\r\n            assignVariable(context, setContext, t1.value, val);\r\n            return;\r\n        }\r\n\r\n        /*\r\n         * assignment of operation\r\n         * e.g.  1 + 5 -> a\r\n         */\r\n        if (isAssignmentOp(t4, \"right\") && !isAssignmentOp(t2) && t5.type === \"name\") {\r\n            const val = evaluateExpression(context, t1, op2, t3);\r\n            assignVariable(context, setContext, t5.value, val);\r\n            return;\r\n        }\r\n\r\n        /*\r\n         * evaluation of double operation\r\n         * e.g.  10 + 1 - 5\r\n         * e.g.  a + 4 + 5\r\n         */\r\n        const val = evaluateExpression(context, t1, op2, t3);\r\n        if (typeof val === \"boolean\") throw Error(\"Bad expression\");\r\n        return evaluateExpression(context, val, op4, t5);\r\n    }\r\n\r\n    if (tokens.length === 6) {\r\n        const t1 = tokens[0];\r\n        const t2 = tokens[1];\r\n        const t3 = tokens[2];\r\n        const t4 = tokens[3];\r\n        const t5 = tokens[4];\r\n        const t6 = tokens[5];\r\n\r\n        /*\r\n         * evaluation of range index\r\n         * e.g.  aa[2:4]\r\n         */\r\n        if (t1.type === \"name\" && isVector(context, t1) &&\r\n            t2.type === \"index_bracket\" &&\r\n            isNumeric(context, t3) &&\r\n            t4.type === \"range\" &&\r\n            isNumeric(context, t5) &&\r\n            t6.type === \"index_bracket\")\r\n        {\r\n            const v = evaluateVector(context, t1);\r\n            return v.slice(evaluateNumeric(context, t3) - 1, evaluateNumeric(context, t5));\r\n        }\r\n    }\r\n\r\n    throw Error(`Command not recognised: '${command}'`);\r\n}\r\n\r\n/**\r\n *\r\n * @param {Context} context\r\n * @param {(Context) => void} setContext\r\n * @param {string} name\r\n * @param {ValueType} value\r\n */\r\nfunction assignVariable (context, setContext, name, value) {\r\n    setContext({\r\n        ...context,\r\n        [name]: value,\r\n    });\r\n}\r\n\r\nfunction removeVariable (context, setContext, name) {\r\n    const { [name]: toRemove, ...rest } = context;\r\n    setContext(rest);\r\n}\r\n\r\n/**\r\n * Range from `start` to `end` inclusive. With optional `step`\r\n * @param {number} start\r\n * @param {number} end\r\n * @param {number} step\r\n */\r\nfunction range (start, end, step=1) {\r\n    return Array(Math.floor((end - start)/step) + 1).fill(0).map((n,i) => (i * step) + start);\r\n}\r\n\r\nfunction assertString (x) {\r\n    if (process.env.NODE_ENV === \"production\") return x;\r\n    if (typeof x !== \"string\") {\r\n        throw Error(\"Assertion Error\");\r\n    }\r\n    return x;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Token} t\r\n * @param {string} [dir]\r\n */\r\nfunction isAssignmentOp(t, dir=null) {\r\n    if (t.type !== \"operator\") return false;\r\n\r\n    const tDir = (t.value === \"<-\" || t.value === \"←\") ? \"left\" :\r\n        (t.value === \"->\" || t.value === \"→\") ? \"right\" :\r\n        false;\r\n\r\n    return tDir && (dir ? dir === tDir : true);\r\n}","import React from 'react';\r\nimport './App.css';\r\n\r\nimport Console from './Console';\r\nimport Variables from './Variables';\r\nimport Graph from './Graph';\r\n\r\nimport interpreter from './interpreter';\r\nimport { Matrix } from './interpreter/matrix';\r\n\r\nconst STATE_KEY = \"R_VARIABLES\";\r\n\r\nfunction App() {\r\n  const [ history , setHistory ] = React.useState([]);\r\n  const [ context , setContext ] = React.useState(retrieveState(STATE_KEY));\r\n\r\n  function setVariables (variables) {\r\n    setContext(variables);\r\n    persistState(STATE_KEY, variables);\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"App-Variables\">\r\n        <Variables variables={context} setVariables={setVariables} />\r\n      </div>\r\n      <div className=\"App-Console\">\r\n        <Console history={history} sendCommand={input => {\r\n          const newHistory = [\r\n            ...history,\r\n            { id: history.length + 1, type: \"input\", content: input }\r\n          ];\r\n          try {\r\n            const output = formatOutput(interpreter(input, context, setVariables));\r\n            let i = 2;\r\n            for (const content of output) {\r\n              newHistory.push({ id: history.length + (i++), type: \"output\", content });\r\n            }\r\n          } catch (e) {\r\n            newHistory.push({ id: history.length + 2, type: \"error\", content: e.message });\r\n          }\r\n          setHistory(newHistory);\r\n        }} performReplacement={true} />\r\n      </div>\r\n      <div className=\"App-Graph\">\r\n        <Graph />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction persistState (key, state) {\r\n  localStorage.setItem(key, JSON.stringify(state));\r\n}\r\n\r\nfunction retrieveState (key, defaultState={}) {\r\n  try {\r\n    const s = localStorage.getItem(key);\r\n    return s ? JSON.parse(s) : defaultState;\r\n  } catch (e) {\r\n    return defaultState;\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param {import('./interpreter').ValueType} value\r\n * @returns {string[]}\r\n */\r\nfunction formatOutput (value) {\r\n  if (value instanceof Matrix) {\r\n    return value.toString().split(\"\\n\");\r\n  }\r\n\r\n  return [JSON.stringify(value)];\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}